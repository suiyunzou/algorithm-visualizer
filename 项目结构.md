# 项目结构说明

## 目录结构
```
src/
├── components/           # 组件目录
│   ├── DataStructures/  # 数据结构相关组件
│   │   ├── Array/      # 数组可视化相关
│   │   │   ├── ArrayVisualizer.tsx      # 数组可视化核心组件
│   │   │   ├── ArrayOperations.tsx      # 数组操作控制组件
│   │   │   └── ArrayComplexity.tsx      # 数组复杂度分析组件
│   │   ├── LinkedList/  # 链表可视化相关
│   │   ├── Stack/      # 栈可视化相关
│   │   ├── Queue/      # 队列可视化相关
│   │   ├── Tree/       # 树结构可视化相关
│   │   └── Graph/      # 图结构可视化相关
│   ├── Algorithms/     # 算法相关组件
│   │   ├── Sorting/    # 排序算法
│   │   └── Searching/  # 搜索算法
│   ├── Visualization/  # 可视化核心组件
│   │   ├── Canvas/     # Canvas相关组件
│   │   └── Controls/   # 控制组件
│   └── UI/            # 通用UI组件
├── models/            # 数据结构模型
│   ├── DataStructure.ts      # 数据结构基类
│   ├── ArrayStructure.ts     # 数组结构实现
│   └── LinkedListStructure.ts # 链表结构实现
├── hooks/            # 自定义Hooks
│   ├── useAnimation.ts       # 动画相关hook
│   └── useVisualization.ts   # 可视化相关hook
├── utils/            # 工具函数
│   ├── animation.ts          # 动画工具
│   └── visualization.ts      # 可视化工具
├── store/            # 状态管理
│   ├── visualizationStore.ts # 可视化状态
│   └── settingsStore.ts      # 设置状态
└── pages/            # 页面组件
```

## 核心模块关系

### 1. 数据结构可视化流程
```
DataStructure Model -> Visualizer Component -> Animation Engine -> Canvas Renderer
     ↑                         ↑                      ↑               ↑
     |                         |                      |               |
  操作方法                  可视化逻辑              动画控制          渲染
```

### 2. 组件调用关系
```
Layout (路由容器)
  ├── DataStructures (数据结构页面)
  │   └── [具体数据结构组件]
  │       ├── Visualizer (可视化组件)
  │       ├── Controls (控制组件)
  │       └── Complexity (复杂度分析)
  └── Algorithms (算法页面)
      └── [具体算法组件]
          ├── Visualizer
          ├── Controls
          └── CodeDisplay
```

### 3. 状态管理流程
```
User Action -> Store Action -> State Update -> Component Update -> Visual Update
```

## 关键接口

### 1. 可视化组件接口
```typescript
interface Visualizer {
  data: any;                    // 要可视化的数据
  operations: Operation[];      // 可用操作
  animationSpeed: number;       // 动画速度
  onStep: () => void;          // 步进控制
  onReset: () => void;         // 重置
}
```

### 2. 数据结构接口
```typescript
interface DataStructure {
  data: any;                    // 内部数据
  operations: {                 // 支持的操作
    [key: string]: Function;
  };
  getState: () => any;         // 获取当前状态
  subscribe: (listener: Function) => void;  // 状态变化订阅
}
```

### 3. 动画引擎接口
```typescript
interface AnimationEngine {
  play: () => void;
  pause: () => void;
  step: () => void;
  reset: () => void;
  setSpeed: (speed: number) => void;
}
```

## 数据流向

1. **用户交互流程**
   ```
   用户操作 -> 操作处理 -> 数据结构更新 -> 状态更新 -> 可视化更新 -> 动画执行
   ```

2. **数据更新流程**
   ```
   数据输入 -> 验证处理 -> 数据结构实例化 -> 可视化组件更新 -> 渲染
   ```

3. **动画控制流程**
   ```
   控制操作 -> 动画引擎 -> 动画状态更新 -> 可视化组件更新 -> 渲染
   ```

## 扩展说明

1. **添加新数据结构**
   - 在 models/ 中创建数据结构类
   - 在 components/DataStructures/ 中创建对应组件
   - 在路由中注册新组件

2. **添加新算法**
   - 在 components/Algorithms/ 中创建算法组件
   - 实现可视化和动画逻辑
   - 在路由中注册新组件

3. **自定义可视化**
   - 继承基础可视化组件
   - 实现自定义渲染逻辑
   - 注册到可视化系统 